<!DOCTYPE html>
<html>

  <head>
   <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
	</head>

  <body>

      <div id="myDiv"><!-- Plotly chart will be drawn inside this DIV --></div>

<script>

Plotly.d3.csv('./data/pph_trade2015.csv', function(err, rows){
      function unpack(rows, key) {
          return rows.map(function(row) { return row[key]; });
      }
  // console.log(unpack(rows, 'postal'));
 var data = [{
    colorscale: [
            [0, 'rgb(1, 26, 54)'],
            // [0.35, 'rgb(40, 60, 190)'],
            [0.5, 'rgb(70, 100, 245)'],
            // [0.6, 'rgb(90, 120, 245)'],
            // [0.7, 'rgb(106, 137, 247)'],
            [1, 'rgb(231, 234, 236)']
        ],
              type: 'choropleth',
              locationmode: 'country codes',
              locations: unpack(rows, 'iso3'),
              z: unpack(rows, 'Eksport PPH w PLN'),
              text: unpack(rows, 'country_pl'),
              autocolorscale: false,
              reversescale: true
          }];

  var layout = {
     width: 1500,
        height: 1500,
          title: '',

          geo: {
            scope: 'europe',
            showframe: false,
            projection: {
            type: 'mercator',
            scale: 1
            },

  },

  margin: {
           l: 0,
           r: 0,
           b: 0,
           t: 10,
           pad: 2
       }
      };

      Plotly.plot(myDiv, data, layout, {showLink: false}, {
  modeBarButtonsToAdd: [{
    name: 'toImage2',
    icon: Plotly.Icons.camera,
    click: function(gd) {
      Plotly.downloadImage(gd, {format: 'svg'})
    }
  }]
});
  });

</script>

  </body>

</html>
